<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>FreeAPS (Loop) Integration - xDrip4iOS</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../css/admonitions.css" rel="stylesheet" />
  <link href="../../css/extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "FreeAPS (Loop) Integration";
    var mkdocs_page_input_path = "configure\\freeaps.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> xDrip4iOS</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Introduction</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../faq/">FAQ</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Install</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/testflight/">Install from Testflight</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/build/">Build from Source</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Connect</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../connect/">Initial Configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../connect/cgm/">Connect to CGM as a Master</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../connect/follower/">Connect to Nightscout as a Follower</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../connect/devices/">Connect to M5Stack/M5StickC</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Configure/Use</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../">General</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../alarms/">Alarms</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../calibrate/">Calibration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../algorithm/">Algorithm</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../applewatch/">Apple Watch</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../smartwatches/">Other Smartwatches</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">FreeAPS (Loop) Integration</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#what-is-freeaps-loop">What is FreeAPS (Loop)?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-do-i-install-freeaps-loop">How do I install FreeAPS (Loop)?</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#clone-the-loopworkspace">Clone the LoopWorkspace</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sign-the-targets">Sign the Targets</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#app-group">App Group</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-do-i-install-xdrip4ios">How do I install xDrip4iOS?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#operation">Operation</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../freeapsx/">FreeAPS X (OpenAPS) Integration</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Use and Troubleshoot</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/">Troubleshooting</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../../troubleshoot/connection_troubles.md">Cannot Connect?</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/disconnections/">Disconnections?</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../../troubleshoot/reporting.md">How to Report Errors</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">xDrip4iOS</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Configure/Use &raquo;</li>
        
      
    
    <li>FreeAPS (Loop) Integration</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="freeaps-loop-integration">FreeAPS (Loop) Integration<a class="headerlink" href="#freeaps-loop-integration" title="Permanent link">⌁</a></h1>
<p>xDrip4iOS can be used as an offline CGM data source for the FreeAPS fork of Loop</p>
<hr />
<h2 id="what-is-freeaps-loop">What is FreeAPS (Loop)?<a class="headerlink" href="#what-is-freeaps-loop" title="Permanent link">⌁</a></h2>
<p><strong>Loop</strong> is an <strong>Artificial Pancreas System</strong> (APS) written for the iPhone.</p>
<p>An APS works by reading blood glucose values, predicting/calculating the insulin requirement and automatically adjusting a user's insulin pump with the aim of keeping the user within their target blood glucose range.</p>
<p><a href="https://github.com/ivalkou/LoopWorkspace">FreeAPS</a> is a fork of the <a href="https://loopkit.github.io/loopdocs/">Loop</a> project developed and maintained by <strong>Ivan Valkou</strong>.</p>
<div class="admonition info">
<p class="admonition-title">FreeAPS vs FreeAPS X??</p>
<p>This could get confusing, so pay attention:</p>
<ul>
<li>Ivan's original <strong>FreeAPS</strong> project is based on <strong>Loop</strong> and is what we are discussing on this page<br /><br /></li>
<li>Ivan's newer <strong>FreeAPS X</strong> project is based on <strong>OpenAPS</strong>. It is a different system and is discussed <a href="../freeapsx/">here</a><br /><br /></li>
</ul>
</div>
<p>The main difference between Loop and FreeAPS is that FreeAPS is able to administer insulin delivery via micro-boluses instead of adjusting basal rates. Although Loop also now has an autobolus branch which is similar, FreeAPS is much more customizable and flexible.</p>
<p>It is important to note that the app developer has decided to halt all active development on FreeAPS in order to concentrate all efforts on his new FreeAPS X project. Collaborators are encouraged to participate with the maintenance of the fork.</p>
<p>Whereas Loop will only work with compatible Dexcom or Medtronic pump-connected sensors, FreeAPS also contains a Nightscout client which can be used to pull glucose data from the user's Nightscout site, or via apps (such as Spike) that have an internal http server that mimics a Nightscout server. </p>
<p>Pulling data from the cloud, or using http servers on iOS, are potentially unstable options for an APS (although they will generally work well most times).</p>
<p><strong>Aleksandar Obucina</strong> has created a fork of Ivan's FreeASP (Loop). This includes an <a href="https://github.com/julian-groen/xdrip-client-swift">xdrip client</a> written in Swift by <strong>Julien Groen</strong>. This modified version of FreeAPS has xDrip4iOS as a CGM option and will pull glucose data directly offline from xDrip4iOS without needing to use any intermediate services.</p>
<p>It is necessary to clone, build and install Aleksandar's fork of FreeAPS and then do the same with the master branch of xDrip4iOS.</p>
<p>Important: The Testflight version of xDrip4iOS <strong>cannot</strong> be used with FreeAPS.</p>
<hr />
<h2 id="how-do-i-install-freeaps-loop">How do I install FreeAPS (Loop)?<a class="headerlink" href="#how-do-i-install-freeaps-loop" title="Permanent link">⌁</a></h2>
<p>Aleks' Github repository is <a href="https://github.com/alekst1d/LoopWorkspace">here</a>.</p>
<p>In LoopDocs there is a nice page about cloning and building workspace files <a href="https://loopkit.github.io/loopdocs/build/loopworkspace/">here</a>.</p>
<p>Please read the above page and ensure your Mac is fully updated (both MacOS and Xcode) and Xcode Command Line tools/Git are installed before proceeding.</p>
<hr />
<h3 id="clone-the-loopworkspace">Clone the LoopWorkspace<a class="headerlink" href="#clone-the-loopworkspace" title="Permanent link">⌁</a></h3>
<p>First we need to create a folder where we will clone the source code and build the project.</p>
<p>We recommened creating a folder in your Documents called "<strong>FreeAPS</strong>".</p>
<p>Open <strong>Terminal</strong> on your Mac and type in the following to change to your Documents folder:</p>
<p><em>(You can copy and paste the below text, one line at a time, pressing return after pasting each line)</em></p>
<pre><code>cd documents
</code></pre>
<p>Create the new folder:</p>
<pre><code>mkdir freeaps
</code></pre>
<p>Change into the newly created folder:</p>
<pre><code>cd freeaps
</code></pre>
<p>We will now issue a Git command to clone (download) the current version of Aleks' repository into your new folder:</p>
<pre><code>git clone --branch=freeaps --recurse-submodules https://github.com/alekst1d/LoopWorkspace
</code></pre>
<p>This will create a new folder called LoopWorkspace containing the source code. </p>
<p>You should now navigate into this new folder:</p>
<pre><code>cd LoopWorkspace
</code></pre>
<p>We will now open the workspace file in Xcode by typing the following:</p>
<pre><code>xed .
</code></pre>
<hr />
<h3 id="sign-the-targets">Sign the Targets<a class="headerlink" href="#sign-the-targets" title="Permanent link">⌁</a></h3>
<p>As per a normal Loop build, you will need to sign the four targets using your Development Team.</p>
<p>Signing will automatically set the Bundle Identifier for your app. You can change this, but be aware that it will then install a completely new FreeAPS app. It's better to just leave it as is.</p>
<hr />
<h3 id="app-group">App Group<a class="headerlink" href="#app-group" title="Permanent link">⌁</a></h3>
<p>Please do not modify the App Groups at all. This is important to ensure integration with xDrip4iOS.</p>
<hr />
<h2 id="how-do-i-install-xdrip4ios">How do I install xDrip4iOS?<a class="headerlink" href="#how-do-i-install-xdrip4ios" title="Permanent link">⌁</a></h2>
<p>You need to follow the <a href="../../install/build/">Build From Source</a> instructions.</p>
<p>The common LoopKit app group is already written into the standard project file in xDrip4iOS so no need to touch anything.</p>
<hr />
<h2 id="operation">Operation<a class="headerlink" href="#operation" title="Permanent link">⌁</a></h2>
<p>The operation of both FreeAPS (Loop) and xDrip4iOS is the same. The only thing needed is to add a CGM in FreeAPS and chose "xDrip4iOS".</p>
<p>This will tell FreeAPS to look for glucose data in the shared app group via Julien's xdrip client.</p>
<p></br></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../freeapsx/" class="btn btn-neutral float-right" title="FreeAPS X (OpenAPS) Integration">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../smartwatches/" class="btn btn-neutral" title="Other Smartwatches"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../smartwatches/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../freeapsx/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
